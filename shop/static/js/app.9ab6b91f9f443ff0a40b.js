webpackJsonp([1],{Guqo:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("7+uW"),a=r("Xxa5"),i=r.n(a),o=r("exGp"),s=r.n(o),u=(r("1nuA"),{data:function(){return{title:"",imageUrl:"",price:"",description:"",activeName:"second",products:[],dialogFormVisible:!1}},created:function(){this.getProducts()},methods:{getProducts:function(){var t=this;return s()(i.a.mark(function e(){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("api/admin/products");case 2:r=e.sent,t.products=r.data.prods;case 4:case"end":return e.stop()}},e,t)}))()},addProduct:function(){var t=this;return s()(i.a.mark(function e(){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.title&&t.imageUrl&&t.price&&t.description)){e.next=15;break}return r={title:t.title,imageUrl:t.imageUrl,price:t.price,description:t.description},e.next=4,t.$axios.post("api/admin/product",r);case 4:if(!e.sent.data.success){e.next=13;break}return t.dialogFormVisible=!1,e.next=9,t.getProducts();case 9:t.title="",t.imageUrl="",t.price="",t.description="";case 13:e.next=16;break;case 15:alert("不得有空余项！");case 16:case"end":return e.stop()}},e,t)}))()},deleteProduct:function(t){var e=this;return s()(i.a.mark(function r(){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.delete("api/admin/product/"+t.id);case 2:return r.sent,r.next=5,e.getProducts();case 5:case"end":return r.stop()}},r,e)}))()},addCart:function(t){var e=this;return s()(i.a.mark(function r(){var n;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n={id:t.id},r.next=3,e.$axios.post("api/cart",n);case 3:r.sent.data.success&&e.$router.push("/cart");case 5:case"end":return r.stop()}},r,e)}))()}}}),c={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加商品")])],1),t._v(" "),r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.products,border:""}},[r("el-table-column",{attrs:{label:"ID",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"名称",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"价格",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.price))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return t.deleteProduct(e.row)}}},[t._v("删除")]),t._v(" "),r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.addCart(e.row)}}},[t._v("添加购物车")])]}}])})],1),t._v(" "),r("el-dialog",{attrs:{title:"收货地址",width:"20%",visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),r("br"),t._v(" "),r("el-input",{attrs:{placeholder:"请输入图片地址"},model:{value:t.imageUrl,callback:function(e){t.imageUrl=e},expression:"imageUrl"}}),t._v(" "),r("br"),t._v(" "),r("el-input",{attrs:{placeholder:"请输入价格"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),t._v(" "),r("br"),t._v(" "),r("el-input",{attrs:{placeholder:"请输入说明"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),t._v(" "),r("br"),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.addProduct}},[t._v("添加")])],1)],1)])},staticRenderFns:[]};var l=r("VU/8")(u,c,!1,function(t){r("Guqo")},null,null).exports,d={data:function(){return{products:[]}},created:function(){this.getCart()},methods:{getCart:function(){var t=this;return s()(i.a.mark(function e(){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("api/cart");case 2:200===(r=e.sent).status&&(t.products=r.data.products);case 4:case"end":return e.stop()}},e,t)}))()},cartDeleteItem:function(t){var e=this;return s()(i.a.mark(function r(){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.delete("api/cartItem/"+t.id);case 2:if(!r.sent.data.success){r.next=6;break}return r.next=6,e.getCart();case 6:case"end":return r.stop()}},r,e)}))()},createOrder:function(){var t=this;return s()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("api/orders");case 2:200===e.sent.status&&t.$router.push("/orders");case 4:case"end":return e.stop()}},e,t)}))()}}},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.createOrder()}}},[t._v("添加订单")]),t._v(" "),r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.products,border:""}},[r("el-table-column",{attrs:{label:"ID",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"名称",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"价格",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.price))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"数量",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.cartItem.quantity))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return t.cartDeleteItem(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]},f=r("VU/8")(d,p,!1,null,null,null).exports,v={data:function(){return{orders:[],products:[]}},created:function(){var t=this;return s()(i.a.mark(function e(){var r,n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("api/orders");case 2:r=e.sent,n=r.status,a=r.data.orders,200===n&&(t.orders=a);case 6:case"end":return e.stop()}},e,t)}))()}},m={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.orders,function(e){return r("div",{key:e.id},[r("h6",[t._v(t._s(e.id))]),t._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products,border:""}},[r("el-table-column",{attrs:{label:"ID",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.id))])]}}],null,!0)}),t._v(" "),r("el-table-column",{attrs:{label:"名称",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.title))])]}}],null,!0)}),t._v(" "),r("el-table-column",{attrs:{label:"价格",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.price))])]}}],null,!0)}),t._v(" "),r("el-table-column",{attrs:{label:"数量",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",[t._v(t._s(e.row.orderItem.quantity))])]}}],null,!0)})],1)],1)}),0)},staticRenderFns:[]},_=r("VU/8")(v,m,!1,null,null,null).exports,h={data:function(){return{activeName:"first"}},components:{Shop:l,Cart:f,Orders:_}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("el-menu",{attrs:{"default-active":this.$route.path,router:"",mode:"horizontal"}},[e("el-menu-item",{attrs:{index:"/Shop"}},[this._v("商品")]),this._v(" "),e("el-menu-item",{attrs:{index:"/Cart"}},[this._v("购物车")]),this._v(" "),e("el-menu-item",{attrs:{index:"/Orders"}},[this._v("订单")])],1),this._v(" "),e("router-view")],1)},staticRenderFns:[]},w=r("VU/8")(h,b,!1,null,null,null).exports,x=r("/ocq");n.default.use(x.a);var k=new x.a({mode:"history",routes:[{path:"/",name:"shop",component:l},{path:"/shop",name:"shop",component:l},{path:"/cart",name:"cart",component:f},{path:"/orders",name:"orders",component:_}]}),y=r("zL8q"),g=r.n(y),S=(r("tvR6"),r("I29D")),$=r.n(S);n.default.config.productionTip=!1,n.default.use(g.a),n.default.prototype.$axios=$.a,new n.default({el:"#app",router:k,components:{App:w},template:"<App/>"})},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.9ab6b91f9f443ff0a40b.js.map